plugin.tx_pxsemantic {
    view {
        templateRootPath >
        templateRootPaths {
            0 = {$plugin.tx_pxsemantic.view.templateRootPath}
        }
        partialRootPath >
        partialRootPaths {
            0 = {$plugin.tx_pxsemantic.view.partialRootPath}
        }
        layoutRootPath >
        layoutRootPaths {
            0 = {$plugin.tx_pxsemantic.view.layoutRootPath}
        }
    }
    persistence {
        storagePid = {$plugin.tx_pxsemantic.persistence.storagePid}
        recursive = {$plugin.tx_pxsemantic.persistence.recursive}
    }
}

# global extbase settings
config.tx_extbase {
    persistence {
        storagePid = {$plugin.tx_pxsemantic.persistence.storagePid}
        recursive = {$plugin.tx_pxsemantic.persistence.recursive}

        classes {
            Portrino\PxSemantic\Domain\Model\Page {
                mapping {
                    tableName = pages
                    // disable single table inheritance
                    recordType =
                    columns {
                        crdate.mapOnProperty = crdate
                        tstamp.mapOnProperty = tstamp
                        backend_layout.mapOnProperty = backendLayout
                    }
                }
            }
        }
    }
}

lib.structuredDataMarkup = USER
lib.structuredDataMarkup {
    userFunc = TYPO3\CMS\Extbase\Core\Bootstrap->run
    extensionName = PxSemantic
    pluginName = StructuredDataMarkup
    vendorName = Portrino
    controller = Entity
    action = render
    view < plugin.tx_pxsemantic.view
    persistence < plugin.tx_pxsemantic.persistence
    settings {
        context = http://schema.org
        # classname of the entity (root) which should be rendered
        entity = Portrino\PxSemantic\SchemaOrg\Thing
        processors {
            # Processors should implement Portrino\PxSemantic\Processors\ProcessorInterface
            # Processors will be executed in order of the array keys
            # 0 {
            #    className = Portrino\PxSemantic\Processor\ExampleProcessor
            #    settings {
            #        foo = bar
            #    }
            # }
        }
    }
}

lib.structuredDataMarkupPageExample < lib.structuredDataMarkup
lib.structuredDataMarkupPageExample {
    settings {
        # classname of the entity (root) which should be rendered
        entity = Portrino\PxSemantic\SchemaOrg\CreativeWork
        processors {
            # Processors should implement Portrino\PxSemantic\Processors\ProcessorInterface
            # Processors will be executed in order of the array keys
            0 {
                className = Portrino\PxSemantic\Processor\PageProcessor
                settings {
                    media {
                        height = 800
                        width = 800
                    }
                }
            }
        }
    }
}
# Renders static information about the corporate contact
# see here: https://developers.google.com/structured-data/customize/contact-points
# or here: https://developers.google.com/schemas/reference/types/Organization
lib.structuredDataMarkupOrganizationExample < lib.structuredDataMarkup
lib.structuredDataMarkupOrganizationExample {
    settings {
        entity = Portrino\PxSemantic\SchemaOrg\Organization
        processors {
            # processor to set properties of an entity via TypoScript
            0 {
                className = Portrino\PxSemantic\Processor\TypoScriptProcessor
                settings {
                    # for string values you do not have to use TEXT datatype, you can just write "key = value"
                    # US, GB, DE
                    areaServed = DE

                    contactPoint {
                        # "customer support", "technical support", "billing support", ...
                        contactType = customer support
                        telephone = +49-123-456-78
                    }

                    logo {
                        # get the logo image uri via TS and prepend the baseUrl to get the absolute path
                        url = IMG_RESOURCE
                        url {
                            file = fileadmin/company_logo.
                            stdWrap.wrap = {TSFE:baseUrl}|
                            stdWrap.insertData = 1
                        }
                    }
                    # special datatype from px_semantic EXT to define arrays
                    sameAs = PX_SEMANTIC_ARRAY
                    sameAs {
                        0 = http://www.facebook.com/foo
                        1 = http://www.youtube.com/user/bar
                        2 = http://www.pinterest.com/fooBar/
                    }
                    # use typolink to generate link to the root page
                    url = TEXT
                    url.typolink {
                        parameter = 1
                        returnLast = url
                    }
                }
            }
        }
    }
}